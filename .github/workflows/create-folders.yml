name: ðŸ“ Create zen-info.pl Folder Structure

on:
  workflow_dispatch:
    inputs:
      include_placeholders:
        description: 'DodaÄ‡ pliki README w folderach?'
        required: true
        default: true
        type: boolean

jobs:
  create-structure:
    runs-on: ubuntu-latest
    
    permissions:
      contents: write
    
    steps:
    - name: ðŸ“¥ Checkout repository
      uses: actions/checkout@v4
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
    
    - name: ðŸ—ï¸ Create complete folder structure
      run: |
        echo "ðŸ—ï¸ Creating zen-info.pl folder structure..."
        
        # Main project folders
        mkdir -p .github/workflows
        mkdir -p src/components
        mkdir -p src/data
        mkdir -p src/utils
        mkdir -p src/styles
        mkdir -p public/images/daily-art
        mkdir -p dist
        
        echo "âœ… Folder structure created!"
        echo ""
        echo "ðŸ“ Created folders:"
        find . -type d -not -path './.*' -not -path './node_modules*' | sort
    
    - name: ðŸ“ Add README files to folders
      if: ${{ github.event.inputs.include_placeholders == 'true' }}
      run: |
        echo "ðŸ“ Adding README files to explain folder purposes..."
        
        # .github/workflows README
        cat > .github/workflows/README.md << 'EOF'
        # ðŸ¤– GitHub Actions Workflows

        Tutaj znajdujÄ… siÄ™ wszystkie automatyzacje zen-info.pl:

        ## Pliki:
        - `update-news.yml` - Pobieranie newsÃ³w co 2h
        - `setup-project.yml` - Setup caÅ‚ego projektu
        - `create-folders.yml` - Tworzenie struktury folderÃ³w
        EOF
        
        # src/components README
        cat > src/components/README.md << 'EOF'
        # âš›ï¸ React Components

        Komponenty React dla zen-info.pl:

        ## Pliki:
        - `ZenPortal.jsx` - GÅ‚Ã³wny komponent portalu
        - `ArticleCard.jsx` - Komponent artykuÅ‚u (opcjonalny)
        - `Navigation.jsx` - Nawigacja (opcjonalny)
        EOF
        
        # src/data README
        cat > src/data/README.md << 'EOF'
        # ðŸ“Š Data Files (JSON Database)

        "Baza danych" w postaci plikÃ³w JSON:

        ## Pliki:
        - `articles.json` - Wszystkie artykuÅ‚y z newsÃ³w
        - `daily-art.json` - Metadata dzieÅ‚ artystycznych
        - `categories.json` - Konfiguracja kategorii (opcjonalny)
        EOF
        
        # src/utils README
        cat > src/utils/README.md << 'EOF'
        # ðŸ› ï¸ Utility Scripts

        Skrypty pomocnicze i automatyzacje:

        ## Pliki:
        - `newsCollector.js` - Pobieranie RSS feeds
        - `artRotator.js` - Rotacja dzieÅ‚ artystycznych (opcjonalny)
        - `categoryMapper.js` - Mapowanie kategorii (opcjonalny)
        EOF
        
        # src/styles README
        cat > src/styles/README.md << 'EOF'
        # ðŸŽ¨ Styles

        Style CSS i konfiguracja wyglÄ…du:

        ## Pliki:
        - `globals.css` - GÅ‚Ã³wne style Tailwind
        - `components.css` - Style komponentÃ³w (opcjonalny)
        - `variables.css` - CSS variables (opcjonalny)
        EOF
        
        # public/images/daily-art README (detailed)
        cat > public/images/daily-art/README.md << 'EOF'
        # ðŸ–¼ï¸ Daily Art Images

        **Tutaj umieszczaj pliki JPG z dzieÅ‚ami artystycznymi na kaÅ¼dy dzieÅ„.**

        ## ðŸ“ Naming Convention:
        ```
        art-001.jpg    # DzieÅ‚o nr 1
        art-002.jpg    # DzieÅ‚o nr 2
        art-003.jpg    # DzieÅ‚o nr 3
        ...
        art-030.jpg    # 30 dzieÅ‚ na miesiÄ…c
        ```

        ## ðŸ“ Specyfikacja obrazÃ³w:
        - **Format:** JPG, PNG, WebP
        - **Rozmiar:** maksymalnie 2MB
        - **RozdzielczoÅ›Ä‡:** 800x600px (4:3) lub podobna
        - **JakoÅ›Ä‡:** wysoka, czytelna

        ## ðŸ”„ Jak dodaÄ‡ nowe dzieÅ‚o:
        1. **Dodaj plik** (np. `art-008.jpg`)
        2. **Zaktualizuj** `src/data/daily-art.json` z metadanymi
        3. **System automatycznie** rotuje obrazy codziennie

        ## ðŸ“Š Status:
        - **Aktualnie:** 0 obrazÃ³w
        - **Minimalne:** 7 obrazÃ³w (tydzieÅ„)
        - **Zalecane:** 30+ obrazÃ³w (miesiÄ…c rotacji)

        ## ðŸŽ¯ PrzykÅ‚ady nazw i tematÃ³w:
        - `art-001.jpg` - "Minimalistyczny krajobraz"
        - `art-002.jpg` - "Architektura miasta"
        - `art-003.jpg` - "Abstrakcyjna kompozycja"
        - `art-004.jpg` - "Fotografia uliczna"
        - `art-005.jpg` - "Natura i przyroda"

        ## âš ï¸ WaÅ¼ne:
        - UÅ¼ywaj tylko **wolnych od praw autorskich** obrazÃ³w
        - Lub **wÅ‚asnych** fotografii/dzieÅ‚
        - SprawdÅº licencje przed dodaniem
        EOF
        
        echo "âœ… README files created in all folders!"
    
    - name: ðŸ” Structure verification
      run: |
        echo "ðŸ” Verifying created structure..."
        echo ""
        echo "ðŸ“Š STRUCTURE SUMMARY:"
        echo "==================="
        
        # Count folders
        FOLDER_COUNT=$(find . -type d -not -path './.*' -not -path './node_modules*' | wc -l)
        echo "ðŸ“ Total folders: $FOLDER_COUNT"
        
        # Count README files
        README_COUNT=$(find . -name "README.md" | wc -l)
        echo "ðŸ“ README files: $README_COUNT"
        
        echo ""
        echo "ðŸ“‚ FOLDER TREE:"
        echo "==============="
        tree -a -I 'node_modules|.git' || find . -type d -not -path './.*' -not -path './node_modules*' | sort | sed 's/^/  /'
        
        echo ""
        echo "ðŸ“„ FILES CREATED:"
        echo "=================="
        find . -name "README.md" | sort | sed 's/^/  /'
        
        echo ""
        echo "âœ… Structure verification complete!"
    
    - name: ðŸ“¤ Commit structure
      run: |
        git config --local user.email "41898282+github-actions[bot]@users.noreply.github.com"
        git config --local user.name "github-actions[bot]"
        
        git add .
        
        if git diff --staged --quiet; then
          echo "No changes to commit"
        else
          git commit -m "ðŸ“ Create zen-info.pl folder structure

          ðŸ—ï¸ Created complete project structure:
          - .github/workflows/ (automation)
          - src/components/ (React components)  
          - src/data/ (JSON database)
          - src/utils/ (helper scripts)
          - src/styles/ (CSS files)
          - public/images/daily-art/ (JPG images)
          
          ðŸ“ Added README files with instructions
          ðŸ¤– Generated by: create-folders workflow"
          
          git push
          echo "âœ… Folder structure committed and pushed!"
        fi
    
    - name: ðŸŽ‰ Success notification
      run: |
        echo ""
        echo "ðŸŽ‰ SUCCESS! zen-info.pl folder structure created!"
        echo "=================================================="
        echo ""
        echo "ðŸ“ Ready folders:"
        echo "  âœ… .github/workflows/ - for GitHub Actions"
        echo "  âœ… src/components/ - for React components"
        echo "  âœ… src/data/ - for JSON data files"
        echo "  âœ… src/utils/ - for utility scripts"
        echo "  âœ… src/styles/ - for CSS styles"
        echo "  âœ… public/images/daily-art/ - for JPG images"
        echo ""
        echo "ðŸ“ Each folder has README with instructions"
        echo ""
        echo "ðŸš€ NEXT STEPS:"
        echo "1. Start adding your files to appropriate folders"
        echo "2. Add JPG images to public/images/daily-art/"
        echo "3. Create your React components in src/components/"
        echo "4. Run news collector to populate src/data/"
        echo ""
        echo "ðŸŒŸ Your zen-info.pl structure is ready!"
